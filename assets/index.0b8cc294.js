var e=Object.defineProperty,r=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(r,t,a)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a;import{v as l,r as i,c as u,w as d,o as c,a as p,i as f,p as v,b as m,d as b,F as O,e as h,f as y,t as g,g as w,h as R,j as S,_ as P}from"./vendor.951faf20.js";const j=i([]),k=u((()=>{var e;return null==(e=j.value)?void 0:e[j.value.length-1]})),A=u((()=>j.value.slice().reverse())),E={name:"QRCodeScanner",props:{qrbox:{type:Number,default:500},fps:{type:Number,default:10}},setup(e){const l=i(),c=i(),p=e=>{var r;r=e,k.value!==r&&j.value.push(r)},f=u((()=>{return l=((e,r)=>{for(var t in r||(r={}))n.call(r,t)&&s(e,t,r[t]);if(a)for(var t of a(r))o.call(r,t)&&s(e,t,r[t]);return e})({},e),r(l,t({experimentalFeatures:{useBarCodeDetectorIfSupported:!0}}));var l}));return d((()=>{var e;const r=l.value;r&&(null==(e=c.value)||e.clear(),j.value=[],c.value=new Html5QrcodeScanner(r.id,f.value),c.value.render(p))})),{scannerElRef:l}}},T={id:"qr-code-scanner",ref:"scannerElRef"};E.render=function(e,r,t,a,n,o){return c(),p("div",T,null,512)};const U=navigator.userAgent,x={Android:()=>/Android/i.test(U),iPadOS13plus:()=>/Macintosh/i.test(U)&&navigator.maxTouchPoints>1,iOS:()=>/iPhone|iPad|iPod/i.test(U)||x.iPadOS13plus(),Opera:()=>/Opera Mini/i.test(U),Windows:()=>/IEMobile/i.test(U),any:()=>x.Android()||x.iOS()||x.Opera()||x.Windows()},C={mobile:x,url:e=>{try{return Boolean(new URL(e))}catch{return!1}}};const H={name:"ResultTable",setup(){const{toasted:e}={toasted:f("toast")};b(A,(()=>{A.value.length&&e.success("掃到ㄌ！")}));return{results:A,isUrl:C.url,getHref:e=>{const r=new URL(e);if(/^sms/i.test(r.protocol)){if(C.mobile.iOS())return r.protocol="sms:",r.href;if(C.mobile.Android())return r.protocol="SMSTO:",r.href}return r.href}}}},I=y("data-v-a424f7d6");v("data-v-a424f7d6");const M={key:1};m();const Q=I(((e,r,t,a,n,o)=>(c(),p("ul",null,[(c(!0),p(O,null,h(a.results,((e,r)=>(c(),p("li",{key:r},[a.isUrl(e)?(c(),p("a",{key:0,href:a.getHref(e),target:"_blank",rel:"noopener noreferrer"},g(e),9,["href"])):(c(),p("span",M,g(e),1))])))),128))]))));H.render=Q,H.__scopeId="data-v-a424f7d6";const _={components:{QRCodeScanner:E,ResultTable:H},setup:()=>({results:A})};_.render=function(e,r,t,a,n,o){const s=R("QRCodeScanner"),l=R("ResultTable");return c(),p(O,null,[w(s),w(l)],64)};!function(e={}){const{immediate:r=!1,onNeedRefresh:t,onOfflineReady:a}=e;let n;"serviceWorker"in navigator&&(n=new l("/shamemaru/sw.js",{scope:"/shamemaru/"}),n.addEventListener("activated",(e=>{e.isUpdate?window.location.reload():null==a||a()})),n.register({immediate:r}).then((e=>e)))}({onOfflineReady(){}});const L=S(_);L.use(P,{position:"top",duration:500,max:3,pauseOnHover:!1}).provide("toast",L.config.globalProperties.$toast),L.mount("#app");
